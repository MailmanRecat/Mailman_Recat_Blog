<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <style>
        @font-face {
            font-family: roboto;
            src:url('Roboto.woff2') format('woff2');
        }

        *{ padding: 0px; margin: 0px; }
        button, input, select{ outline: none; }
        button{ cursor: pointer; }

        body{ background-color: #ffffff; opacity: 1; z-index: 0; }

        .icon-search{ position: relative; border-radius: 50%; -webkit-transform: rotate( -45deg ); background-color: transparent; }
        .icon-search.small { width: 20px; height: 20px; border: solid 2px #0678C9; }
        .icon-search.middle{ width: 57px; height: 57px; border: solid 2px #0678C9; }
        .icon-search.big   { width: 77px; height: 77px; border: solid 3px #0678C9; }
        .icon-search:before{ content: attr(BF); width: 12%; height: 77%; background-color: #0678C9; position: absolute; bottom: -77%; left: 50%; -webkit-transform: translateX(-50%); }

        .search, .keyboard{  -webkit-transition: all 0.4s; z-index: 1; }

        .search      { position: relative; height: 42px; width: 80%; left: 50%; top: 177px; -webkit-transform: translateX(-50%); }
        .search input{ position: relative; width: 96%; height: 100%; padding: 0% 2%; border: 2px #0678C9 solid; background-color: #ffffff; border-radius: 0px; color: #000000; font-size: 1.6em; }
        .search.up   { top: 17px; }

        .search .icon-search{ position: absolute; right: 17px; top: 5px; z-index: 7; }

        .res-box{ display: block; position: absolute; width: 80%; height: auto; max-height: 600px; margin-left: 10%; top: 59px; overflow: scroll; background-color: #ffffff; -webkit-box-shadow:0 1px 4px rgba(0,0,0,.17); }
        .res-box ul{ position: relative; height: auto; list-style: none; width: 100%; left: 0px; top:0px; cursor: pointer; }
        .res-box ul li{ height: 77px; line-height: 77px; width: 96%; padding: 0% 2%; }
        .res-box ul li:hover{ background-color: #EDEDED; }

        .keyboard, .keyboard button{ -webkit-box-shadow:0 1px 4px rgba(0,0,0,.17); }
        .keyboard{ position: fixed; bottom: -100%; padding: 5px 0px 5px 0px; left: 0px; width: 100%; height: 400px; background-color: #ffffff; }
        .keyboard.keyboard-show{ bottom: 0px; }
        .keyboard .row{ position: relative; width: 100%; height: 80px; }
        .keyboard .row button{ position: relative; margin: 5px 5px; border: none; background-color: #ffffff; font-size: 1.8em; border-radius: 4px; width: calc( 8% - 10px ); height: 70px; }
        .keyboard .row button:active{ background-color: #0678C9; color: #ffffff; }

        .keyboard .row:nth-child(1) button{ width: calc( 9% - 10px ); left: 0.5%; }

        .keyboard .row:nth-child(2) button{ left: 0.5%; width: calc( 9% - 10px ); }

        .keyboard .row:nth-child(3) button{ left: 5%; width: calc( 9% - 10px ); }

        .keyboard .row:nth-child(4) button{ left: 0.5%; width: calc( 8.9% - 10px ); }
        .keyboard .row:nth-child(4) button:nth-child(1){ width: calc( 10% - 10px ); }

        .keyboard .row:nth-child(5) button{ left: 2.5%; width: calc( 12.5% - 10px ); }
        .keyboard .row button.space { width: calc( 70% - 10px ); }

        .card{ position: absolute; left: 50%; top: 100%; width: 47%; background-color: #ffffff; height: auto; -webkit-transform: translate3d(-50%, 0%, 0); -webkit-transition: all 0.4s; -webkit-box-shadow:0 1px 4px rgba(0,0,0,.17); }
        .card.show{ top: 117px; }
        .card .content{ position: relative; width: 100%; min-height: 200px; background-color: #0678C9; }
        .card .content p{ width: 100%; line-height: 200px; color: #ffffff; text-align: center; }

        .card button.view-page{ font-size: 1.2em; position: relative; margin: 27px auto; left: 50%; -webkit-transform: translateX(-50%); border: none; background-color: #0678C9; color: #ffffff; border-radius: 2px; width: auto; padding: 5px 17px; }
    </style>
</head>
<body>

<div class="search up"><input type="text" placeholder="search"><div class="icon-search small"></div></div>

<div class="res-box">
    <ul>

    </ul>
</div>

<div class="card">
    <div class="content"><p>UISegmentedControler</p></div>
    <button class="view-page">view page</button>
</div>

<div class="keyboard">
    <div class="row">
        <button data-value="@">@</button><button data-value="0">0</button><button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button><button data-value="8">8</button><button data-value="9">9</button>
    </div>
    <div class="row">
        <button data-value="q">q</button><button data-value="w">w</button><button data-value="e">e</button><button data-value="r">r</button><button data-value="t">t</button><button data-value="y">y</button><button data-value="u">u</button><button data-value="i">i</button><button data-value="o">o</button><button data-value="p">p</button><button data-value="delete">delete</button>
    </div>
    <div class="row">
        <button data-value="a">a</button><button data-value="s">s</button><button data-value="d">d</button><button data-value="f">f</button><button data-value="g">g</button><button data-value="h">h</button><button data-value="j">j</button><button data-value="k">k</button><button data-value="l">l</button><button data-value="return">return</button>
    </div>
    <div class="row">
        <button data-value="lock">lock</button><button data-value=",">,</button><button data-value="z">z</button><button data-value="x">x</button><button data-value="c">c</button><button data-value="v">v</button><button data-value="b">b</button><button data-value="n">n</button><button data-value="m">m</button><button data-value=".">.</button><button data-value="?">?</button>
    </div>
    <div class="row">
        <button data-value="number" class="number">123</button><button data-value="space" class="space">space</button><button data-value="hide" class="hide">hide</button>
    </div>
</div>

</body>
<script>
    (function(window){
        var copyright = {
            Author  : 'Mailmam_Recat',
            Date    : '2015',
            Mail    : 'MailmanRecat@gmail.com',
            Blog    : 'http://zhihupaper.com',
            Browser : 'chrome only',
            info    : function(){ console.log( 'Anthor: '+this.Author+' | Date: '+this.Date+' | Mail: '+this.Mail+' | Browser: '+ this.Browser ) }
        };

        copyright.info();
        return window.copyright = copyright;
    })(window);

    var $  = function(obj){ return document.querySelector(obj)                    },
            $$   = function(obj )    { return document.querySelectorAll(obj)      },
            $n   = function(obj )    { return document.getElementsByClassName(obj)},
            $ca  = function(el, name){ el.classList.add(name)            },
            $cr  = function(el, name){ el.classList.remove(name)         },
            $cc  = function(el, name){ return el.classList.contains(name)},
            $ct  = function(el, name){ el.classList.toggle(name)         };

    UIaction = {
        search   : {
            el      : $('.search'),
            up      : function(){ this.el.classList.add('up')    },
            down    : function(){ this.el.classList.remove('up') }
        },
        keyboard: {
            el    : $('.keyboard'),
            show  : function(){ this.el.classList.add('keyboard-show')    },
            hide  : function(){ this.el.classList.remove('keyboard-show') }
        }
    };


    var special_key = ['delete', 'return', 'number', 'space', 'hide', 'lock'];
    [].slice.call( $$('.keyboard button')).forEach(function(el, i){
        var value = el.getAttribute('data-value');
        el.onclick = function(){
            if( special_key.indexOf(value) ){
                console.log(value);
            }
        }
    });


    var SearchE = function(elStr, resElStr, delegate, options){
        var self = this;

        self.elStr    = elStr;
        self.el       = document.querySelector(self.elStr);
        self.resElStr = resElStr;
        self.resEl    = document.querySelector(self.resElStr);
        self.delegate = delegate;
        self.DRFn     = self.delegate.require;
        self.DOFn     = self.delegate.option;

        if( typeof self.DRFn.DidSelect !== 'function' ) return { ER: 'require fn DidSelect not found!' };

        self.activate = false;

        self.searchV  = '';
        self.keywords = [];
        self.max      = 0;
        self.current  = 0;

        self.options = {
            noSelectBackgroundColor: '#FFF',
            onSelectBackgroundColor: '#F4F4F4'
        };

        for( var key in options ){
            self.options[key] = options[key];
        }

        self.init();
    };
    SearchE.prototype = {
        init: function(){
            var self = this;

            self.el.onfocus = function(){
                if( self.DOFn.DidFocus === 'function' ) self.DOFn.DidFocus();
                self.activate = true;
            };
            self.el.onblur  = function(){
                if( self.DOFn.DidBlur === 'function' ) self.DOFn.DidBlur();
                self.activate = false;
            };
            self.el.oninput = function(){
                if( self.DOFn.OnInput === 'function' ) self.DOFn.OnInput();
                self.searchV = self.el.value;
                var keys = self.getKeywords();

                if( self.searchV.length === 0 ) self.resEl.innerHTML = '';
                else                 self.insert( keys );
            };

            return true;
        },
        addKeyWords: function( word ){
            var self = this;
            self.keywords.push(word);
        },
        getKeywords: function(){
            var self = this, len = self.searchV.length;
            if( len === 0 ) return;

            var word = self.searchV.toUpperCase();
            var T = true, keys = [];

            for( var key in self.keywords){
                var keyword = self.keywords[key].toUpperCase();
                for(var i in word){
                    var letter = word[i];
                    if( keyword.indexOf( letter ) === -1 ){
                        T = false;
                    }
                }

                if( T === true && len <= self.keywords[key].length ){
                    keys.push( self.keywords[key] );
                }

                T = true;
            }

            return keys;
        },
        onSelect: function(){
            var self = this;
            [].slice.call( document.querySelectorAll( self.resElStr + ' li' ) ).forEach(function(el, i){
                if(i === self.current - 1){
                    el.setAttribute('data-select', 'YES');
                    el.style.backgroundColor = self.options.onSelectBackgroundColor;
                }else{
                    el.setAttribute('data-select', 'NO');
                    el.style.backgroundColor = self.options.noSelectBackgroundColor;
                }
            });
        },
        insert: function( keys ){
            var self = this, html = '';
            for( var key in keys ){
                html += '<li data-label="' + keys[key] + '">' + keys[key] + '</li>';
            }
            if( keys.length === 0 ){
                html = '<li>NO RESULT</li>';
            }
            self.resEl.innerHTML = html;
            [].slice.call( document.querySelectorAll( self.resElStr + ' li' )).forEach(function(el, i){
                el.onclick = function(){ self.DRFn.DidSelect( el.getAttribute('data-label') ) };
            });
            self.max     = keys.length;
            self.current = 0;
        },
        up: function(){
            var self = this;
            if( self.current == 0 ){ self.current = self.max; }
            else{ self.current -= 1; }

            self.onSelect();
        },
        down: function(){
            var self = this;
            if( self.current == self.max ){
                self.current = 1;
            }else{
                self.current += 1;
            }

            self.onSelect();
        },
        didSelect: function(){
            var self = this, isV = true;
            [].slice.call( document.querySelectorAll( self.resElStr + ' li' ) ).forEach(function(el, i){
                var isSelect = el.getAttribute('data-select');
                if( isSelect === 'YES' ){
                    self.DRFn.DidSelect( el.getAttribute('data-label') );
                    isV = false;
                }
            });
            if( isV ) self.DRFn.DidSelect( self.searchV );
        }
    };

    var keys = [
        'UISegmentedControl by javascript',
        'UINavigationControl by javascript',
        'exclamation icon by css',
        'search icon by css'
    ];

    var deleg = {
        require: {
            DidSelect: function(el){
                console.log(el);
//                alert(el.getAttribute('data-label'));
            }
        },
        option: {
            DidFocus: function(){
                console.log('DF');
            },
            DidBlur : function(){
                console.log('DB');
            }
        }
    };

    var o = new SearchE('.search input', '.res-box ul', deleg, {});
    for( var i = 0, len = keys.length; i<len; i++ ){
        o.addKeyWords( keys[i] );
    }

    document.onkeydown = function(e){
        if( e.keyCode === 38 ){
            if( o.activate === true ){
                o.up();
            }
        }else if( e.keyCode === 40 ){
            if( o.activate === true ){
                o.down();
            }
        }else if( e.keyCode === 13 ){
            if( o.activate === true ){
                o.didSelect();
            }
        }
    };

</script>
</html>